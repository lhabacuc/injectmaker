!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){var r=[],o={},a=[],i=t;null!=i&&null!=i.caseInsensitive&&(i.caseInsensitive=i.caseInsensitive!==!1);var p=e.getTokenAt(t),f=(t.line,t.ch),h=p.start,g=p.end;if(p.type&&/\b(?:string|comment)\b/.test(p.type))return{list:r,from:e.Pos(t.line,h),to:e.Pos(t.line,g)};var m=p.string,v=m.slice(0,f-h),y=m;if(m.indexOf(".")>-1)v=m.slice(0,f-h);else{for(var C=e.getLine(t.line).slice(0,h)+m,w=C.lastIndexOf("?"),b=C.lastIndexOf("!"),P=C.lastIndexOf("."),x=Math.max(w,b,P),S=0;S<i.keywords.length;S++)0==i.keywords[S].indexOf(m)&&r.push(i.keywords[S]),0==i.keywords[S].toLowerCase().indexOf(m.toLowerCase())&&i.caseInsensitive&&r.push(i.keywords[S]);if(null!=i&&null!=i.keywords){var L=i.keywords.filter(function(e){return 0===e.lastIndexOf(m,0)});r=r.concat(L),i.caseInsensitive&&(L=i.keywords.filter(function(e){return 0===e.toLowerCase().lastIndexOf(m.toLowerCase(),0)}),r=r.concat(L))}if(-1!==x&&S>=0){if("."===C[x]){var k=C.slice(0,x),A=l(e,t,k);A&&(r=n(A,v),i.useGlobalScope!==!1&&(r=r.concat(s(v,window,"","property"))),i.keywords&&(r=r.concat(i.keywords.filter(function(e){return 0===e.lastIndexOf(v,0)}))))}}else if(i.useGlobalScope!==!1){r=r.concat(s(m,window,"top","variable")),i.caseInsensitive&&(r=r.concat(s(m.toLowerCase(),window,"top","variable").map(function(e){return{text:e.text,type:e.type,icon:e.icon,render:e.render,className:e.className?e.className+" CodeMirror-hint-case-insensitive":"CodeMirror-hint-case-insensitive"}}))),i.keywords&&(r=r.concat(i.keywords.filter(function(e){return 0===e.lastIndexOf(m,0)})),i.caseInsensitive&&(r=r.concat(i.keywords.filter(function(e){return 0===e.toLowerCase().lastIndexOf(m.toLowerCase(),0)}).map(function(e){return{text:e,className:"CodeMirror-hint-case-insensitive"}}))))}var E=[];if(null==i||i.supportsSelection!==!1){var B=e.getSelection();B&&B.length>0&&(E=i.keywords&&i.keywords.filter(function(e){return 0===e.lastIndexOf(B,0)})||[])}if("."===m.charAt(0)||"?"===m.charAt(0)||"!"===m.charAt(0)){var I=e.getLine(t.line),O=I.slice(0,f),j=O.match(/(\w+)/g),N=j?j[j.length-1]:"",q="";if(N){for(var S=O.lastIndexOf(N);S>=0&&"."!=O[S]&&"?"!=O[S]&&"!"!=O[S];S--);for(var H=S;H>=0&&("."==O[H]||"?"==O[H]||"!"==O[H]);H--);if(H>=0){var M=O.slice(0,H);M=M.replace(/[\(\)\[\]\{\}]/g,"");var T=M.split(" "),D=T[T.length-1];D&&(q=D)}}var G={object:["toString","valueOf","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],$:["each","extend","queue"]},R=G[q]||G[N]||[];R&&r.push.apply(r,R),r&&E.length>0&&(r=r.concat(E))}r=u(r),o.list=r,o.from=e.Pos(t.line,h),o.to=e.Pos(t.line,g);for(var W=0;W<r.length;W++){var U=r[W].text||r[W];if("string"!=typeof U){var _=U.render||function(e,t){var n=document.createElement("span");return n.appendChild(document.createTextNode(e.displayText||e.text)),n};U.render=_}else r[W]={text:U}}return o}function n(e,t){if(e){"string"==typeof e&&(e=u(e.split(".")));for(var n=e.pop(),l="function"==typeof n?n(t):n,s=0;s<l.length;s++)""!==l[s]&&o[l[s]]!==!0&&a.push(l[s]);return i(l,t)}return[]}function l(t,n,l){l=l.trim();var s=e.TernServer&&e.TernServer.getTernHints;if("function"==typeof s){var o=s(t,n,l);if(o&&o.list&&o.list.length>0)return o.list}var a=r(t,n),i=a.start,c=a.end,u=t.getTokenAt(e.Pos(n.line,i));if(!u.type)return null;var p=u.string,f=p.lastIndexOf(".");if(f>0){var h="",g=p.substring(0,f);return h=g,function(){return s(h)}}return null}function r(t,n){var l=n.line,r=n.ch,o=t.getLine(l),a=Math.max(0,o.lastIndexOf(".",r-1)),i=a,s=o.lastIndexOf(".",r-1);a<s&&(a=s,i=a);var c=o.lastIndexOf("?",r-1);a<c&&(a=c,i=a);var u=o.lastIndexOf("!",r-1);a<u&&(a=u,i=a);var p=i,f=null;if(p<0){var h=t.findPosH(n,-1,"word",!1);if(h.line!=l)return{start:r,end:r};f=h.ch}else f=p+1;return{start:f,end:r}}function o(e,t){var n=e[t];return"object"==typeof n&&(n=Object.keys(n)),n}function a(e,t,n){var l=e.slice(0,n).trim();if(l&&/\./.test(l)){var r=l.split("."),o=r[0],a=r[1];if(t&&t[o]&&t[o][a])return t[o][a]}}function i(e,t){if(e){var n=e.filter(function(e,n,l){return l.indexOf(e)===n});return n.sort()}}function s(e,t,n,l){var r=[];t=t||window;var o=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;if(""===e)r=Object.getOwnPropertyNames(t);else{var a=new RegExp("^"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i");r=Object.getOwnPropertyNames(t).filter(function(t){return a.test(t)&&o.test(t)})}var i="variables"===l,s=[];return r.forEach(function(r){try{var o=Object.getOwnPropertyDescriptor(t,r);if(o){var a=o.value;if(a&&"function"==typeof a&&!i){var c={text:r,type:"function",icon:"f"};s.push(c)}else if(null!=a&&!i){var c={text:r,type:"property",icon:"v"};s.push(c)}else if(o.get||o.set){if(!i){var c={text:r,type:"property",icon:"p"};s.push(c)}}else if("top"===n&&!i){var c={text:r,type:"variable",icon:"v"};s.push(c)}}}catch(u){}}),s}function c(t){return e.Pos(t.line,t.ch)}function u(e){for(var t={},n=[],l=0;l<e.length;++l)t[e[l]]||(t[e[l]]=!0,n.push(e[l]));return n}var p=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],f=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],h=["a","abbr","b","bdi","bdo","big","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","label","map","mark","meter","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","textarea","time","u","var","wbr"],g=["caption","colgroup","div","dl","form","table","tbody","tfoot","thead","tr"],m=["circle","defs","desc","ellipse","g","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],v=["alt","class","for","href","id","name","src","title","type"],y="blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),C="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" "),w="activeElement addEventListener adoptNode appendChild blur click cloneNode compareDocumentPosition createAttribute createComment createDocumentFragment createElement createElementNS createEvent createNodeIterator createProcessingInstruction createRange createTextNode doctype documentElement evaluate execCommand exitFullscreen firstChild focus getElementsByClassName getElementsByName getElementsByTagName getElementById getSelection hasFocus importNode normalize querySelector querySelectorAll removeChild removeEventListener appendChild blur click cloneNode compareDocumentPosition createAttribute setAttribute addEventListener".split(" "),b=["async","autocomplete","autoplay","autostart","controls","default","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate"],P=["break","case","catch","continue","default","delete","do","else","false","finally","for","function","if","in","instanceof","new","null","return","switch","this","throw","true","try","typeof","var","void","while","with","yield"],x=["abstract","boolean","byte","char","class","const","debugger","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"],S={};S.document=w,S.window=[],S.XMLHttpRequest=[],S.navigator=[];var L=P;L=L.concat(["window","document","navigator","location","history","localStorage","sessionStorage","console","screen"]).concat(["setTimeout","setInterval","clearTimeout","clearInterval"]),L=L.concat(["Object","Number","String","Boolean","Array","Function","Date","Math","RegExp","JSON","Promise"]).concat(["fetch","XMLHttpRequest","FormData","Blob","File","FileReader","URL"]).concat(["addEventListener","removeEventListener","querySelector","querySelectorAll"]).concat(["parseInt","parseFloat","isNaN","isFinite"]).concat(C).concat(["map","reduce","filter","find","forEach","push","pop","shift","unshift","splice","slice","join"]),L=L.concat(["async","await","class","import","export","from","extends","super"]);var k={};k.Array=["length","constructor","concat","every","filter","forEach","indexOf","join","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","slice","some","sort","splice","toString","unshift"],k.String=["charAt","charCodeAt","concat","fromCharCode","indexOf","lastIndexOf","length","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","valueOf"],k.RegExp=["exec","test","toString","compile"],k.Object=["create","defineProperty","defineProperties","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys","preventExtensions","seal"],k.JSON=["parse","stringify"],k.Function=["apply","arguments","bind","call","caller","length","name","toString"],k.Date=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","now","parse","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","toDateString","toISOString","toJSON","toLocaleDateString","toLocaleString","toLocaleTimeString","toString","toTimeString","toUTCString","UTC","valueOf"],k.Number=["toExponential","toFixed","toPrecision","toString","valueOf","MAX_VALUE","MIN_VALUE","NEGATIVE_INFINITY","POSITIVE_INFINITY"],k.Math=C.concat(["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"]),k.XMLHttpRequest=["onreadystatechange","readyState","response","responseText","responseType","responseXML","status","statusText","timeout","upload","withCredentials","DONE","HEADERS_RECEIVED","LOADING","OPENED","UNSENT","abort","addEventListener","dispatchEvent","getAllResponseHeaders","getResponseHeader","onabort","onerror","onload","onloadend","onloadstart","onprogress","open","overrideMimeType","removeEventListener","send","setRequestHeader"],k.Event=["bubbles","cancelable","currentTarget","defaultPrevented","eventPhase","target","timeStamp","type","preventDefault","stopImmediatePropagation","stopPropagation"],k.HTMLCollection=["length","item","namedItem"],k.NodeList=["length","item"],k.Node=["appendChild","baseURI","childNodes","cloneNode","compareDocumentPosition","firstChild","hasChildNodes","insertBefore","isDefaultNamespace","isEqualNode","isSameNode","lastChild","lookupNamespaceURI","lookupPrefix","nextSibling","nodeName","nodeType","nodeValue","ownerDocument","parentElement","parentNode","previousSibling","removeChild","replaceChild","textContent"],k.Element=["classList","className","clientHeight","clientLeft","clientTop","clientWidth","firstElementChild","id","innerHTML","lastElementChild","nextElementSibling","previousElementSibling","scrollHeight","scrollLeft","scrollTop","scrollWidth","tagName","getElementsByClassName","getElementsByTagName","querySelector","querySelectorAll","getBoundingClientRect","getClientRects","scrollIntoView","attributes","childElementCount","children","classList","dataset"],k.Document=["activeElement","body","characterSet","compatMode","cookie","defaultView","designMode","doctype","documentElement","documentURI","firstChild","forms","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","head","images","implementation","lastChild","links","location","plugins","readyState","referrer","scripts","styleSheets","title","visibilityState","hidden","querySelector","querySelectorAll","getElementsByClassName","createElement","createTextNode","addEventListener","removeEventListener","dispatchEvent"],k.console=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],k.DOMException=["code","message","name"],k.DOMParser=["parseFromString"],k.History=["length","state","back","forward","go","pushState","replaceState"],k.Location=["href","protocol","host","hostname","port","pathname","search","hash","assign","reload","replace"],k.Screen=["availHeight","availWidth","colorDepth","height","pixelDepth","width"],L=L.concat(v).concat(y).concat(p).concat(f).concat(h).concat(g).concat(m).concat(b);var A=["abstract","arguments","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"],E=function(e,t){var n=e.getCursor(),l=e.getTokenAt(n);return{list:L,from:e.Pos(n.line,l.start),to:e.Pos(n.line,l.end)}};e.registerHelper("hint","javascript",function(n,l){var r=l||{};return r.keywords=L,r.caseInsensitive=!0,r.supportsSelection=!0,r.useGlobalScope=!0,t(n,r)})});